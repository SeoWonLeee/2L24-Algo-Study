# Q4. ë§Œë“¤ ìˆ˜ ì—†ëŠ” ê¸ˆì•¡

### ğŸ’¡ Info

|   ì •ë³´    |                                 ë‚´ìš©                                 |
|:-------:|:------------------------------------------------------------------:|
|   ë‚œì´ë„   |                                ğŸŸ¢âšªâšª                                |
|  í’€ì´ ì‹œê°„  |                                30ë¶„                                 | 
|  ì‹œê°„ ì œí•œ  |                                 1ì´ˆ                                 |
| ë©”ëª¨ë¦¬ ì œí•œ  |                               128MB                                |
|   ê¸°ì¶œ    |                           2019 ì¹´ì¹´ì˜¤ ì‹ ì… ê³µì±„                           |
| ê°•ì˜ |                                 X                                  |
| ë§í¬ | [í”„ë¡œê·¸ë˜ë¨¸ìŠ¤](https://programmers.co.kr/learn/courses/30/lessons/42891) |

<br>
<br>

### ğŸ’­ ë¬¸ì œ ì´í•´
- Nê°œì˜ ìŒì‹ì´ íšŒì „íŒì— ëŒì•„ê°€ëŠ”ë°, ì¤‘ê°„ì— ë„¤íŠ¸ì›Œí¬ ë¬¸ì œë¡œ ëŠê²¼ë‹¤ê°€ ë¼ì´ë¸Œë¥¼ ì¬ê°œí•  ê²½ìš° ëª‡ ë²ˆ ìŒì‹ë¶€í„° ë‹¤ì‹œ ì„­ì·¨í•˜ë©´ ë˜ëŠ”ì§€ ì°¾ëŠ” ë¬¸ì œ
- ê° ìŒì‹ì„ ëª¨ë‘ ë¨¹ëŠ”ë° í•„ìš”í•œ ì‹œê°„ì´ ë‹´ê²¨ìˆëŠ” ë°°ì—´ food_times, ë„¤íŠ¸ì›Œí¬ ì¥ì• ê°€ ë°œìƒí•œ ì‹œê°„ Kì´ˆê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§.

<br>

> #### ì œí•œ ì‚¬í•­
>  - food_times ëŠ” ê° ìŒì‹ì„ ëª¨ë‘ ë¨¹ëŠ”ë° í•„ìš”í•œ ì‹œê°„ì´ ìŒì‹ì˜ ë²ˆí˜¸ ìˆœì„œëŒ€ë¡œ ë“¤ì–´ìˆëŠ” ë°°ì—´ì´ë‹¤. 
>  - k ëŠ” ë°©ì†¡ì´ ì¤‘ë‹¨ëœ ì‹œê°„ì„ ë‚˜íƒ€ë‚¸ë‹¤. 
>  - ë§Œì•½ ë” ì„­ì·¨í•´ì•¼ í•  ìŒì‹ì´ ì—†ë‹¤ë©´ -1ì„ ë°˜í™˜í•˜ë©´ ëœë‹¤.

> #### ì •í™•ì„± í…ŒìŠ¤íŠ¸ ì œí•œ ì‚¬í•­
> - food_times ì˜ ê¸¸ì´ëŠ” 1 ì´ìƒ 2,000 ì´í•˜ì´ë‹¤. 
> - food_times ì˜ ì›ì†ŒëŠ” 1 ì´ìƒ 1,000 ì´í•˜ì˜ ìì—°ìˆ˜ì´ë‹¤. 
> - këŠ” 1 ì´ìƒ 2,000,000 ì´í•˜ì˜ ìì—°ìˆ˜ì´ë‹¤.


> #### íš¨ìœ¨ì„± í…ŒìŠ¤íŠ¸ ì œí•œ ì‚¬í•­
> - food_times ì˜ ê¸¸ì´ëŠ” 1 ì´ìƒ 200,000 ì´í•˜ì´ë‹¤. 
> - food_times ì˜ ì›ì†ŒëŠ” 1 ì´ìƒ 100,000,000 ì´í•˜ì˜ ìì—°ìˆ˜ì´ë‹¤. 
> - këŠ” 1 ì´ìƒ 2 x 10^13 ì´í•˜ì˜ ìì—°ìˆ˜ì´ë‹¤.


> #### ì…ì¶œë ¥ ì˜ˆ
| food_times |  K   | result |
|:----------:|:----:|:-------:|
| [3, 1, 2] | 5 | 1 |

<br>
<br>

### ğŸ’­ ìƒê°í•œ ì•Œê³ ë¦¬ì¦˜
```ì‹¤ì œ í’€ì´ ì‹œê°„ : ë¶„(í’€ì´ ì‹¤íŒ¨ë¡œ ë‹µì•ˆ ì°¸ê³ í•¨)```

- ìŒì‹ì„ ë¨¹ëŠ” ì‹œê°„ì˜ í•© 'sum' ë³€ìˆ˜ ì¶”ê°€ í›„, í•© ê³„ì‚°(ë‹¨, ë” ì„­ì·¨í•´ì•¼í•  ìŒì‹ì´ ì—†ëŠ” ê²½ìš° -1 ë°˜í™˜ ì¡°ê±´ ì¶”ê°€)
- ìŒì‹ì„ ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•œ ë’¤ì— ì‹œê°„ì´ ì ê²Œ ê±¸ë¦¬ëŠ” ìŒì‹ë¶€í„° êº¼ë‚´ê¸°(ìš°ì„ ìˆœìœ„ í ì‚¬ìš©)
  - ìš°ì„ ìˆœìœ„ íì— [ìŒì‹ ì‹œê°„, ìŒì‹ ë²ˆí˜¸] í˜•íƒœë¡œ add
  - í ì§„í–‰ : ```sum(ìŒì‹ì„ ë¨¹ëŠ”ë° ì‚¬ìš©í•œ ì‹œê°„)``` + ```(íì— ë„£ì„ ìŒì‹ì˜ ì‹œê°„ - ì´ì „ì— ë„£ì—ˆë˜ ìŒì‹ ì‹œê°„)``` + ```í˜„ì¬ ìŒì‹ ê°œìˆ˜```ê°€ k(ë°©ì†¡ì´ ì¤‘ë‹¨ëœ ì‹œê°„)ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì„ ê²½ìš°
    - ```í˜„ì¬ê¹Œì§€ ìŒì‹ì„ ë¨¹ëŠ”ë° ê±¸ë¦° ì‹œê°„(now - lastend)``` X ```í˜„ì¬ ë‚¨ì€ ìŒì‹ ê°œìˆ˜```ë¥¼ -> ```sum(ìŒì‹ì„ ë¨¹ëŠ”ë° ì‚¬ìš©í•œ ì‹œê°„)```ì— ë”í•˜ê¸°

        ```
        íšŒì „íŒì— ìŒì‹ì´ ê³„ì† ë‚˜ì˜¤ê¸° ë•Œë¬¸!
        = 1ë²ˆ ìŒì‹ ì†Œìš” ì‹œê°„ì´ ê°€ì¥ ì‘ë‹¤ë©´, ê³„ì† 1ë²ˆ ìŒì‹ë¶€í„° ë¨¹ëŠ”ê²ƒì´ê¸° ë•Œë¬¸ì„.
        ```
      
    - ìŒì‹ ì‹œê°„ ì—…ë°ì´íŠ¸
    - ë‚¨ì€ ìŒì‹ ê°œìˆ˜ ë¹¼ì£¼ê¸°

    ```java
    //ì˜¤í›„ 5ì‹œ 42ë¶„ ì‹œì‘ ~ 6ì‹œ 28ë¶„
    import java.util.*;
    
    class Solution {
    public int solution(int[] food_times, long k) {
    
            int sum = 0;
            
            // ì „ì²´ ìŒì‹ì„ ë¨¹ëŠ” ì‹œê°„ë³´ë‹¤ kê°€ í¬ê±°ë‚˜ ê°™ë‹¤ë©´ -1
            for(int i=0; i<food_times.length; i++){
                sum += food_times[i];
            }
            
            if(sum <= k){
                return -1;
            }
            
            // ì‹œê°„ì´ ì‘ì€ ìŒì‹ë¶€í„° ë¹¼ì„œ ì •ë ¬ -> ìš°ì„ ìˆœìœ„ í ì‚¬ìš©
            PriorityQueue<Food> queue = new PriorityQueue<>();
            for(int i=0; i <food_times.length; i++){
                // ìš°ì„ ìˆœìœ„ íì— add -> ìŒì‹ ì‹œê°„, ìŒì‹ ë²ˆí˜¸ í˜•íƒœ(ê²°ê³¼ ë¦¬í„´ì€ ìŒì‹ ë²ˆí˜¸ë¡œ í•´ì•¼í•˜ê¸° ë•Œë¬¸)
                queue.add(new Food(i+1, food_times[i]));
            }
            
    
            int lastEnd = 0; //ì§ì „ì— ë‹¤ ë¨¹ì€ ìŒì‹ ì‹œê°„
            int after = food_times.length; //ë‚¨ì€ ìŒì‹ ê°œìˆ˜
            
            //sum + (í˜„ì¬ ìŒì‹ ì‹œê°„ - ì´ì „ ìŒì‹ ì‹œê°„) * í˜„ì¬ ìŒì‹ ê°œìˆ˜ì™€ k ë¹„êµ
            while(sum + ((queue.peek().getTime() - lastEnd) * after) <= k){
                int now = queue.poll().getTime();
                sum += (now - lastEnd) * after; 
                lastEnd = now; // ë¹„êµ 1íšŒê°€ ëë‚˜ë©´ -> ì´ì „ ìŒì‹ ì‹œê°„ì´ ì—…ë°ì´íŠ¸ ë˜ì–´ì•¼ í•¨.
                after--;
            }
            
            //ëª‡ ë²ˆì§¸ ìŒì‹ì¸ì§€ ì¶œë ¥
            ArrayList<Food> result = new ArrayList<>();
            while (!queue.isEmpty()) {
                result.add(queue.poll());
            }
            
            // ìŒì‹ì˜ ë²ˆí˜¸ ê¸°ì¤€ ì •ë ¬
            result.sort(Comparator.comparingInt(Food::getIndex));
            
            return result.get((int) ((k-sum) % after)).getIndex();
        }
        
        class Food implements Comparable<Food> {
            int index;
            int time;
    
            public Food(int index, int time) {
                this.index = index;
                this.time = time;
            }
    
            public int getIndex() {
                return index;
            }
    
            public int getTime() {
                return time;
            }
    
            // ì‹œê°„ì´ ì§§ì€ ê²ƒì´ ë†’ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§€ë„ë¡ ì„¤ì •
            @Override
            public int compareTo(Food other) {
                return Integer.compare(this.time, other.getTime());
            }
        }
    }
    ```

<br>
<br>

### âŒ ì˜¤ë‹µì²´í¬
- ìœ íš¨í•˜ì§€ ì•Šì€ ì¸ë±ìŠ¤ì— ì ‘ê·¼ ì‹œ ë‚˜íƒ€ë‚˜ëŠ” ì—ëŸ¬ ë°œìƒ
    ```
    Exception in thread "main" java.lang.IndexOutOfBoundsException: Index -1 out of bounds for length 3
        at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)
        at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:70)
        at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:248)
        at java.base/java.util.Objects.checkIndex(Objects.java:373)
        at java.base/java.util.ArrayList.get(ArrayList.java:427)
        at Solution.solution(Unknown Source)
        at SolutionTest.lambda$main$0(Unknown Source)
        at SolutionTest$SolutionRunner.run(Unknown Source)
        at SolutionTest.main(Unknown Source)
    ```
  
- ì›ì¸? sum(ìŒì‹ì„ ë¨¹ëŠ” ì‹œê°„)ì„ ì´ˆê¸°í™” í•´ì£¼ì§€ ì•Šì•„ ìœ„ì˜ ì „ì²´ ì‹œê°„ì´ ëª¨ë‘ ìˆœíšŒëœë‹¤ìŒ íê°€ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸
  ```java
     ...
        sum = 0; //ì´ˆê¸°í™” ì¶”ê°€ğŸ¯
        int lastEnd = 0; //ì§ì „ì— ë‹¤ ë¨¹ì€ ìŒì‹ ì‹œê°„
        int after = food_times.length; //ë‚¨ì€ ìŒì‹ ê°œìˆ˜
        
        //sum + (í˜„ì¬ ìŒì‹ ì‹œê°„ - ì´ì „ ìŒì‹ ì‹œê°„) * í˜„ì¬ ìŒì‹ ê°œìˆ˜ì™€ k ë¹„êµ
        while(sum + ((queue.peek().getTime() - lastEnd) * after) <= k){
            int now = queue.poll().getTime();
            sum += (now - lastEnd) * after; 
            lastEnd = now; // ë¹„êµ 1íšŒê°€ ëë‚˜ë©´ -> ì´ì „ ìŒì‹ ì‹œê°„ì´ ì—…ë°ì´íŠ¸ ë˜ì–´ì•¼ í•¨.
            after--;
        }
  ...
  ```

<br>
<br>

### ğŸ’­ ìµœì¢… í’€ì´
- ìŒì‹ì„ ë¨¹ëŠ” ì‹œê°„ì˜ í•© 'sum' ë³€ìˆ˜ ì¶”ê°€ í›„, í•© ê³„ì‚°(ë‹¨, ë” ì„­ì·¨í•´ì•¼í•  ìŒì‹ì´ ì—†ëŠ” ê²½ìš° -1 ë°˜í™˜ ì¡°ê±´ ì¶”ê°€)
- ### ğŸ“¢ ë°˜ë“œì‹œ sum ì´ˆê¸°í™”í•´ì£¼ê¸°ğŸ“¢
- ìŒì‹ì„ ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•œ ë’¤ì— ì‹œê°„ì´ ì ê²Œ ê±¸ë¦¬ëŠ” ìŒì‹ë¶€í„° êº¼ë‚´ê¸°(ìš°ì„ ìˆœìœ„ í ì‚¬ìš©)
    - ìš°ì„ ìˆœìœ„ íì— [ìŒì‹ ì‹œê°„, ìŒì‹ ë²ˆí˜¸] í˜•íƒœë¡œ add
    - í ì§„í–‰ : ```sum(ìŒì‹ì„ ë¨¹ëŠ”ë° ì‚¬ìš©í•œ ì‹œê°„)``` + ```(íì— ë„£ì„ ìŒì‹ì˜ ì‹œê°„ - ì´ì „ì— ë„£ì—ˆë˜ ìŒì‹ ì‹œê°„)``` + ```í˜„ì¬ ìŒì‹ ê°œìˆ˜```ê°€ k(ë°©ì†¡ì´ ì¤‘ë‹¨ëœ ì‹œê°„)ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì„ ê²½ìš°
        - ```í˜„ì¬ê¹Œì§€ ìŒì‹ì„ ë¨¹ëŠ”ë° ê±¸ë¦° ì‹œê°„(now - lastend)``` X ```í˜„ì¬ ë‚¨ì€ ìŒì‹ ê°œìˆ˜```ë¥¼ -> ```sum(ìŒì‹ì„ ë¨¹ëŠ”ë° ì‚¬ìš©í•œ ì‹œê°„)```ì— ë”í•˜ê¸°
        - ìŒì‹ ì‹œê°„ ì—…ë°ì´íŠ¸
        - ë‚¨ì€ ìŒì‹ ê°œìˆ˜ ë¹¼ì£¼ê¸°

### íš¨ìœ¨ì„± í…ŒìŠ¤íŠ¸
- ê¸°ì¡´ í…ŒìŠ¤íŠ¸ëŠ” ë™ê³¼í–ˆìœ¼ë‚˜, íš¨ìœ¨ì„± í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ë°œìƒ
- intí˜•ì„ longí˜•ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ë²”ìœ„ë¥¼ ë„“í˜€ì£¼ëŠ” ê²ƒìœ¼ë¡œ ìˆ˜ì • í›„ ì •ë‹µ ì²˜ë¦¬ë¨.
  ![image](https://github.com/hayannn/2L24-Algo-Study/assets/102213509/06851d4b-ad5e-4da6-9c3e-2808204c4458)