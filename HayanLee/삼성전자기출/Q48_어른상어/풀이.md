# ì–´ë¥¸ ìƒì–´

|   ì •ë³´    |                ë‚´ìš©                 |
|:-----------:|:---------------------------------:|
|   ë‚œì´ë„   |              ğŸŸ¢ğŸŸ¢ğŸŸ¡               |
|  í’€ì´ ì‹œê°„  |                50ë¶„                |
|  ì‹œê°„ ì œí•œ  |                1ì´ˆ                 |
| ë©”ëª¨ë¦¬ ì œí•œ  |               512MB               |
| ê¸°ì¶œ |              ì‚¼ì„±ì „ì ê³µì±„              |
| ë§í¬ | https://acmicpc.net/problem/19237 |

<br>
<br>

### â–«ï¸ ë¬¸ì œ ì •ë³´
<img width="1254" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/560f5b01-b00b-471b-8c37-afe8145ab65a">
<img width="1207" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/048d70b7-de01-4c87-b2c0-005c0fcc1363">
<img width="1132" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/99eb9dd8-a262-47ac-81a1-86d43c956643">
<img width="1196" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/669fc772-f9ee-414a-ba51-eb2b7edb8751">
<img width="1084" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/3aa1b678-91ae-462d-9273-3951b85cb554">
<img width="1235" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/1a9f4f57-c8a7-4f57-8315-b4f52596af84">
<img width="1217" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/d12cfc40-21ff-41c3-9921-10e3f43987a6">

<br>
<br>

### â–«ï¸ ì…ì¶œë ¥ ì˜ˆì‹œ
```java
//ì…ë ¥1
5 4 4
0 0 0 0 3
0 2 0 0 0
1 0 0 0 4
0 0 0 0 0
0 0 0 0 0
4 4 3 1
2 3 1 4
4 1 2 3
3 4 2 1
4 3 1 2
2 4 3 1
2 1 3 4
3 4 1 2
4 1 2 3
4 3 2 1
1 4 3 2
1 3 2 4
3 2 1 4
3 4 1 2
3 2 4 1
1 4 2 3
1 4 2 3
```
```java
//ì¶œë ¥1
14
```

<br>

```java
//ì…ë ¥2
4 2 6
1 0 0 0
0 0 0 0
0 0 0 0
0 0 0 2
4 3
1 2 3 4
2 3 4 1
3 4 1 2
4 1 2 3
1 2 3 4
2 3 4 1
3 4 1 2
4 1 2 3
```
```java
//ì¶œë ¥2
26
```

<br>

```java
//ì…ë ¥3
5 4 1
0 0 0 0 3
0 2 0 0 0
1 0 0 0 4
0 0 0 0 0
0 0 0 0 0
4 4 3 1
2 3 1 4
4 1 2 3
3 4 2 1
4 3 1 2
2 4 3 1
2 1 3 4
3 4 1 2
4 1 2 3
4 3 2 1
1 4 3 2
1 3 2 4
3 2 1 4
3 4 1 2
3 2 4 1
1 4 2 3
1 4 2 3
```
```java
//ì¶œë ¥3
-1
```

<br>

```java
//ì…ë ¥4
5 4 10
0 0 0 0 3
0 0 0 0 0
1 2 0 0 0
0 0 0 0 4
0 0 0 0 0
4 4 3 1
2 3 1 4
4 1 2 3
3 4 2 1
4 3 1 2
2 4 3 1
2 1 3 4
3 4 1 2
4 1 2 3
4 3 2 1
1 4 3 2
1 3 2 4
3 2 1 4
3 4 1 2
3 2 4 1
1 4 2 3
1 4 2 3
```
```java
//ì¶œë ¥4
-1
```

<br>
<br>

### â–«ï¸ ì•Œê³ ë¦¬ì¦˜

- ```í’€ì´ ì‹œê°„ : 54ë¶„(ì´ˆê³¼)```
0. N, M, K, smell([íŠ¹ì • ëƒ„ìƒˆì˜ ìƒì–´ ë²ˆí˜¸, íŠ¹ì • ëƒ„ìƒˆì˜ ë‚¨ì€ ì‹œê°„] 2ì°¨ì› ë°°ì—´), ìƒí•˜ì¢Œìš°(dx,dy) ì •ë³´ ì „ì—­ë³€ìˆ˜ë¡œ ì„ ì–¸í•˜ê¸°
1. N, M, K ì…ë ¥ë°›ê¸°
2. ë°°ì—´ ì…ë ¥ë°›ê¸°(ë¬¼ê³ ê¸°ì˜ ë²ˆí˜¸, ë°©í–¥)
3. ìƒì–´ ì´ë™ êµ¬í˜„í•˜ê¸°
    - ë§Œì•½ ì´ë¯¸ ë‹¤ë¥¸ ìƒì–´ê°€ ìˆë‹¤ë©´, ë‚®ì€ ë²ˆí˜¸ê°€ ë“¤ì–´ê°€ê²Œ ìƒì–´ ì´ë™
    - ëƒ„ìƒˆê°€ ë‚¨ì•„ìˆë‹¤ë©´, ê·¸ ëƒ„ìƒˆê°€ ìˆëŠ” ê³³ìœ¼ë¡œ ìƒì–´ ì´ë™

```java
//ì²« í’€ì´ ì†ŒìŠ¤ì½”ë“œ
package HayanLee.ì‚¼ì„±ì „ìê¸°ì¶œ.Q48_ì–´ë¥¸ìƒì–´;

import java.util.*;

public class AdultShark {
   static int N, M, K;
   static int[][] board;
   static Shark[] sharks;
   static Smell[][] smells;
   static int[] dx = {0, -1, 1, 0, 0};
   static int[] dy = {0, 0, 0, -1, 1};

   static class Shark {
      int num, x, y, dir;
      boolean alive;

      Shark(int num, int x, int y, int dir, boolean alive) {
         this.num = num;
         this.x = x;
         this.y = y;
         this.dir = dir;
         this.alive = alive;
      }
   }

   static class Smell {
      int sharkNum, time;

      Smell(int sharkNum, int time) {
         this.sharkNum = sharkNum;
         this.time = time;
      }
   }

   public static void main(String[] args) {
      Scanner sc = new Scanner(System.in);

      // ì…ë ¥ ë°›ê¸°
      N = sc.nextInt();
      M = sc.nextInt();
      K = sc.nextInt();

      board = new int[N][N];
      smells = new Smell[N][N];
      sharks = new Shark[M + 1];

      // ìƒì–´ë“¤ê³¼ ëƒ„ìƒˆ ì´ˆê¸° ì„¤ì •
      for (int i = 0; i < N; i++) {
         for (int j = 0; j < N; j++) {
            int num = sc.nextInt();
            if (num != 0) {
               board[i][j] = num;
               smells[i][j] = new Smell(num, K);
               sharks[num] = new Shark(num, i, j, 0, true);
            }
         }
      }

      int result = simulate(); // ê²°ê³¼ë¥¼ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œ

      System.out.println(result);
   }

   static int simulate() {
      for (int time = 1; time <= 1000; time++) {
         moveSharks(time);
         updateSmells(time);
         if (checkSingleSharkLeft()) {
            return time;
         }
      }
      return -1;
   }

   // ìƒì–´ ì´ë™ í•¨ìˆ˜
   static void moveSharks(int time) {
      for (int i = 1; i <= M; i++) {
         if (sharks[i] != null && sharks[i].alive) {
            Shark shark = sharks[i];
            boolean moved = false;
            for (int j = 0; j < 4; j++) {
               int nx = shark.x + dx[shark.dir];
               int ny = shark.y + dy[shark.dir];
               if (nx >= 0 && nx < N && ny >= 0 && ny < N) {
                  if (smells[nx][ny] == null || smells[nx][ny].time < time) {
                     if (board[nx][ny] == 0 || board[nx][ny] > shark.num) {
                        if (board[nx][ny] != 0) {
                           sharks[board[nx][ny]].alive = false;
                        }
                        board[nx][ny] = shark.num;
                        board[shark.x][shark.y] = 0;
                        shark.x = nx;
                        shark.y = ny;
                        shark.dir = j + 1;
                        moved = true;
                        break;
                     }
                  }
               }
               shark.dir = (shark.dir + 1) % 4;
            }
            if (!moved) {
               for (int j = 0; j < 4; j++) {
                  int nx = shark.x + dx[shark.dir];
                  int ny = shark.y + dy[shark.dir];
                  if (nx >= 0 && nx < N && ny >= 0 && ny < N) {
                     if (smells[nx][ny] != null && smells[nx][ny].sharkNum == shark.num) {
                        board[nx][ny] = shark.num;
                        board[shark.x][shark.y] = 0;
                        shark.x = nx;
                        shark.y = ny;
                        shark.dir = j + 1;
                        break;
                     }
                  }
                  shark.dir = (shark.dir + 1) % 4;
               }
            }
         }
      }
   }

   // ëƒ„ìƒˆ ê°±ì‹  í•¨ìˆ˜
   static void updateSmells(int time) {
      for (int i = 0; i < N; i++) {
         for (int j = 0; j < N; j++) {
            if (smells[i][j] != null) {
               smells[i][j].time--;
               if (smells[i][j].time == 0) {
                  smells[i][j] = null;
               }
            }
         }
      }

      for (int i = 1; i <= M; i++) {
         if (sharks[i] != null && sharks[i].alive) {
            Shark shark = sharks[i];
            smells[shark.x][shark.y] = new Smell(shark.num, K);
         }
      }
   }

   // í•œ ë§ˆë¦¬ì˜ ìƒì–´ë§Œ ë‚¨ì•„ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
   static boolean checkSingleSharkLeft() {
      int count = 0;
      for (int i = 1; i <= M; i++) {
         if (sharks[i] != null && sharks[i].alive) {
            count++;
            if (count > 1) {
               return false;
            }
         }
      }
      return true;
   }
}
```

<br>
<br>

### ğŸš€ Trouble-Shooting

1. ëª¨ë“  ì¶œë ¥ì´ -1ë¡œ ë‚˜ì˜¤ëŠ” ë¬¸ì œ
    - êµì¬ ì•Œê³ ë¦¬ì¦˜ì„ ì°¸ê³ í•˜ì—¬ ë³€í˜•í•´ í•´ê²°
        - ì´ë™ í•¨ìˆ˜ì—ì„œ ìš°ì„  ìˆœìœ„ë¥¼ ê³ ë ¤í•˜ì§€ ì•Šê³  êµ¬í˜„í•˜ì—¬ ë¬¸ì œê°€ ë°œìƒí•œ ê²ƒìœ¼ë¡œ íŒŒì•….
        - ë˜í•œ, ìƒì–´ ìœ„ì¹˜ì— ëƒ„ìƒˆ ì—…ë°ì´íŠ¸ ê¸°ì¤€ì´ ëª¨í˜¸í•˜ì—¬ ë¬¸ì œê°€ ë°œìƒ
        - ëƒ„ìƒˆ ì—…ë°ì´íŠ¸ ê³¼ì •ì—ì„œ ê° ìƒì–´ì˜ ì´ë™ ì—¬ë¶€ê°€ ê³ ë ¤ë˜ì§€ ì•Šê³  ëª¨ë“  ëƒ„ìƒˆê°€ ê°±ì‹ ë˜ì–´ ê³„ì‚° ë¶ˆê°€ëŠ¥
        - ìƒì–´ê°€ ëª¨ë‘ ì´ë™ëœ í›„ì— ëƒ„ìƒˆê°€ í•œêº¼ë²ˆì— ì—…ë°ì´íŠ¸ë˜ë‹ˆ, -1ì´ ë‚˜ì˜¬ ìˆ˜ë°–ì— ì—†ì—ˆìŒ.(ì´ë™ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ëƒ„ìƒˆê°€ ëª¨ë‘ ì—…ë°ì´íŠ¸ë˜ë‹ˆ ì •ë³´ê°€ ì˜ëª»ë˜ëŠ” ê²ƒ)

- ```before```: ì´ë™ ë°©í–¥ì˜ ê¸°ì¤€ì„ ëƒ„ìƒˆì˜ ì¡´ì¬ ì—¬ë¶€ë¡œ ê²°ì •í–ˆê³ , ì´ë™ í›„ ëƒ„ìƒˆë¥¼ ê°±ì‹ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆìŒ.
- ```after```: ì´ë™ ë°©í–¥ì„ ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ê²°ì •í•˜ë„ë¡ ë³€ê²½, ì´ë™í•  ìœ„ì¹˜ë¥¼ ì°¾ê³  ë‚œ í›„ ëƒ„ìƒˆ ì¡´ì¬ ì—¬ë¶€ì— ë”°ë¼ ì´ë™ ì—¬ë¶€ ê²°ì •
    - ì´ë™ ê³¼ì •ì—ì„œ ë¯¸ë¦¬ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•´ ê³„ì‚°ëŸ‰ì„ ì¤„ì„.


2. ë°±ì¤€ ì œì¶œ ì‹œ 25%ì—ì„œ **í‹€ë ¸ìŠµë‹ˆë‹¤**ê°€ ë‚˜ì˜¤ëŠ” ë¬¸ì œ
    - ì´ ë¬¸ì œë¥¼ ì°¾ê¸° ëª»í•´ì„œ ì˜¤ë˜ ê±¸ë¦¼ğŸ˜…
    - 1000ì´ˆ ì´ˆê³¼ ì—¬ë¶€ì˜ ì¡°ê±´ ì˜¤ë¥˜
        - ì „: ```if (time >= 1000) {```
        - í›„: ```if (time > 1000) {```

```java
//ìˆ˜ì •ëœ ì½”ë“œ
package HayanLee.ì‚¼ì„±ì „ìê¸°ì¶œ.Q48_ì–´ë¥¸ìƒì–´;

import java.util.*;

public class AdultShark2 {
    static int N;
    static int M;
    static int K;
    static int[][] sharks;
    static int[] sharkDir;
    static int[][][] smell;
    static int[][][] priority;
    static int[] dx = {-1, 1, 0, 0};
    static int[] dy = {0, 0, -1, 1};

    static int[][] now;

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        N = sc.nextInt();
        M = sc.nextInt();
        K = sc.nextInt();

        // ìƒì–´ì˜ ì´ˆê¸° ìœ„ì¹˜ì™€ ëƒ„ìƒˆ ì •ë³´ ì…ë ¥ ë°›ê¸°
        sharks = new int[N][N];
        smell = new int[N][N][2];
        for (int i = 0; i < N; i++) {
            for (int j = 0; j < N; j++) {
                sharks[i][j] = sc.nextInt();
                if (sharks[i][j] != 0) {
                    smell[i][j][0] = sharks[i][j];
                    smell[i][j][1] = K;
                }
            }
        }

        // ìƒì–´ì˜ ì´ˆê¸° ë°©í–¥ ì…ë ¥ ë°›ê¸°
        sharkDir = new int[M];
        for (int i = 0; i < M; i++) {
            sharkDir[i] = sc.nextInt();
        }

        // ìƒì–´ì˜ ë°©í–¥ ìš°ì„ ìˆœìœ„ ì…ë ¥ ë°›ê¸°
        priority = new int[M][4][4];
        for (int i = 0; i < M; i++) {
            for (int j = 0; j < 4; j++) {
                for (int l = 0; l < 4; l++) {
                    priority[i][j][l] = sc.nextInt();
                }
            }
        }

        int time = 0;
        while (true) {
            SmellInfo();
            int[][] next = moveShark();
            if (next == null) {
                System.out.println(-1);
                break;
            }
            sharks = next;
            time++;

            if (time > 1000) {
                System.out.println(-1);
                break;
            }

            if (sharkOne()) {
                System.out.println(time);
                break;
            }
        }
    }

    // ëƒ„ìƒˆ ì •ë³´ ê°±ì‹ 
    static void SmellInfo() {
        for (int i = 0; i < N; i++) {
            for (int j = 0; j < N; j++) {
                if (smell[i][j][1] > 0) {
                    smell[i][j][1]--;
                }
                if (sharks[i][j] != 0) {
                    smell[i][j][0] = sharks[i][j];
                    smell[i][j][1] = K;
                }
            }
        }
    }

    // ìƒì–´ ì´ë™
    static int[][] moveShark() {
        now = new int[N][N]; // ì´ë™ í›„ì˜ ìƒì–´ ìœ„ì¹˜ë¥¼ ì €ì¥í•  ë°°ì—´

        for (int x = 0; x < N; x++) {
            for (int y = 0; y < N; y++) {
                if (sharks[x][y] != 0) {
                    int direction = sharkDir[sharks[x][y] - 1];
                    boolean find = false;
                    for (int i = 0; i < 4; i++) {
                        int nx = x + dx[priority[sharks[x][y] - 1][direction - 1][i] - 1];
                        int ny = y + dy[priority[sharks[x][y] - 1][direction - 1][i] - 1];
                        if (nx >= 0 && nx < N && ny >= 0 && ny < N) {
                            if (smell[nx][ny][1] == 0) {
                                sharkDir[sharks[x][y] - 1] = priority[sharks[x][y] - 1][direction - 1][i];
                                if (now[nx][ny] == 0) {
                                    now[nx][ny] = sharks[x][y];
                                } else {
                                    now[nx][ny] = Math.min(now[nx][ny], sharks[x][y]);
                                }
                                find = true;
                                break;
                            }
                        }
                    }
                    if (find) {
                        continue;
                    }

                    // ëƒ„ìƒˆê°€ ì—†ëŠ” ê³³ì´ ì—†ëŠ” ê²½ìš°
                    for (int index = 0; index < 4; index++) { // ìì‹ ì˜ ëƒ„ìƒˆê°€ ìˆëŠ” ê³³ìœ¼ë¡œ ì´ë™
                        int nx = x + dx[priority[sharks[x][y] - 1][direction - 1][index] - 1];
                        int ny = y + dy[priority[sharks[x][y] - 1][direction - 1][index] - 1];
                        if (nx >= 0 && nx < N && ny >= 0 && ny < N) {
                            if (smell[nx][ny][0] == sharks[x][y]) {
                                sharkDir[sharks[x][y] - 1] = priority[sharks[x][y] - 1][direction - 1][index];
                                now[nx][ny] = sharks[x][y];
                                break;
                            }
                        }
                    }
                }
            }
        }

        // ëª¨ë“  ìƒì–´ì˜ ì´ë™ì´ ëë‚œ í›„, ìƒˆë¡œìš´ ìƒì–´ ë°°ì—´ì„ ë°˜í™˜
        // ì´ë•Œ, ìƒˆë¡œìš´ ìƒì–´ ë°°ì—´ì´ ë¹„ì–´ìˆëŠ” ê²½ìš°ëŠ” ìƒì–´ê°€ ëª¨ë‘ ì£½ì€ ê²½ìš°
        for (int i = 0; i < N; i++) {
            for (int j = 0; j < N; j++) {
                if (now[i][j] != 0) {
                    return now;
                }
            }
        }
        return null;
    }

    // í•œ ë§ˆë¦¬ì˜ ìƒì–´ë§Œ ë‚¨ì•˜ëŠ”ì§€ í™•ì¸
    static boolean sharkOne() {
        for (int i = 0; i < N; i++) {
            for (int j = 0; j < N; j++) {
                if (sharks[i][j] > 1) {
                    return false;
                }
            }
        }
        return true;
    }
}
```

<br>
<br>

### â–«ï¸ ìµœì¢… í’€ì´
- AdultShark2.java ì°¸ê³ 

<img width="278" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/cc0f566d-7b12-46a1-9e0a-59685954b2e4">

<img width="143" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/33216dbf-9b61-4bf5-9fe4-dbd1b9337fb3">

<img width="220" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/5fe21250-bc42-49ea-b91b-b77b3e88e60b">

<img width="199" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/0bced376-49f2-4105-a058-705da4c2f85e">

<img width="1164" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/226fbda2-4d55-407d-81fd-9ccbd9dd527e">