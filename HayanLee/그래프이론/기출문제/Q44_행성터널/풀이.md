# í–‰ì„±í„°ë„

|   ì •ë³´    |  ë‚´ìš©   |
|:-----------:|:-----:|
|   ë‚œì´ë„   | ğŸŸ¢ğŸŸ¢âšª |
|  í’€ì´ ì‹œê°„  |  40ë¶„  |
|  ì‹œê°„ ì œí•œ  |  1ì´ˆ   |
| ë©”ëª¨ë¦¬ ì œí•œ  | 128MB |
| ê¸°ì¶œ | COCI  |
| ë§í¬ | https://www.acmicpc.net/problem/2887 |
<br>
<br>

### â–«ï¸ ë¬¸ì œ ì •ë³´
<img width="1171" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/38190c1c-588a-4b3c-8090-427dca323820">

<br>
<br>

### â–«ï¸ ì…ì¶œë ¥ ì˜ˆì‹œ
```java
//ì…ë ¥
5
11 -15 -15
14 -5 -15
-1 -1 -5
10 -4 -1
19 -4 19
```
```java
//ì¶œë ¥
4
```

<br>
<br>

### â–«ï¸ ì•Œê³ ë¦¬ì¦˜
- ```í’€ì´ ì‹œê°„ : 78ë¶„(ì´ˆê³¼)```
1. N ì…ë ¥ë°›ê¸°
2. ë°°ì—´ ì…ë ¥ë°›ê¸°
3. í¬ë£¨ìŠ¤ì¹¼ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ êµ¬í˜„
    - Union Find ì—°ì‚° ìˆ˜í–‰
        - Math.minìœ¼ë¡œ ë” ì‘ì€ ê°’ì„ í•©ì§‘í•©ì— ë„£ê¸°(ìµœì†Œ ë¹„ìš© ì°¾ê¸°)

<br>

#### ë§ëŠ” ì•Œê³ ë¦¬ì¦˜

1. N ì…ë ¥ë°›ê¸°
2. ë°°ì—´ ì…ë ¥ë°›ê¸°(P)
3. í¬ë£¨ìŠ¤ì¹¼ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ êµ¬í˜„
    - ì…ë ¥ë°›ì€ ê°„ì„  ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
    - ì‚¬ì´í´ í˜•ì„± ì•ˆí•˜ëŠ” ê²½ìš°ì—ë§Œ í–‰ì„± ì—°ê²°, ëë‚  ë•Œê¹Œì§€ ë°˜ë³µ
    - í„°ë„ ë¹„ìš©ì„ ëª¨ë‘ ë”í•´ ìµœì¢… ìµœì†Œ ë¹„ìš© ê³„ì‚°

```java
//ì²« í’€ì´ ì†ŒìŠ¤ì½”ë“œ(ë§ì§€ ì•Šì€ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ êµ¬í˜„)
package HayanLee.ê·¸ë˜í”„ì´ë¡ .ê¸°ì¶œë¬¸ì œ.Q44_í–‰ì„±í„°ë„;

import java.util.*;

class Tunnel implements Comparable<Tunnel> {
    private int planetA;
    private int planetB;
    private int distance;

    public Tunnel(int planetA, int planetB, int distance) {
        this.planetA = planetA;
        this.planetB = planetB;
        this.distance = distance;
    }

    public int getDistance() {
        return this.distance;
    }

    public int getPlanetA() {
        return this.planetA;
    }

    public int getPlanetB() {
        return this.planetB;
    }

    @Override
    public int compareTo(Tunnel other) {
        return this.distance - other.distance;
    }
}

public class Main {
    static int[] P;
    static int N;

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        N = sc.nextInt();

        P = new int[N];
        for (int i = 0; i < N; i++) {
            P[i] = i;
        }

        PriorityQueue<Tunnel> pq = new PriorityQueue<>();
        int totalDistance = 0;

        for (int i = 0; i < N; i++) {
            int x = sc.nextInt();
            int y = sc.nextInt();
            int z = sc.nextInt();
            pq.add(new Tunnel(x, y, z));
        }

        int savedDistance = kruskal(pq);

        int result = totalDistance - savedDistance;
        System.out.println(result);
    }

    static int kruskal(PriorityQueue<Tunnel> pq) {
        int savedDistance = 0;

        while (!pq.isEmpty()) {
            Tunnel tunnel = pq.poll();
            int rootA = find(tunnel.getPlanetA());
            int rootB = find(tunnel.getPlanetB());

            if (rootA != rootB) {
                union(rootA, rootB);
                savedDistance += tunnel.getDistance();
            }
        }

        return savedDistance;
    }

    static void union(int x, int y) {
        x = find(x);
        y = find(y);
        if (x != y) {
            P[y] = x;
        }
    }

    static int find(int x) {
        if (P[x] == x) {
            return x;
        }
        return P[x] = find(P[x]);
    }
}
```

<br>
<br>

### ğŸš€ Trouble-Shooting

1. ```Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: Index 11 out of bounds for length 5```
    - ì•Œê³ ë¦¬ì¦˜ êµì²´ë¡œ í•´ê²° â•Point[] ë°°ì—´ì„ ì¶”ê°€í•´ x,y,z ì¢Œí‘œë¥¼ ê°ê° ê³„ì‚°í•  ìˆ˜ ìˆë„ë¡ ë³€í˜•
        - ì´ì „ ì½”ë“œ : ìš°ì„ ìˆœìœ„ í, í„°ë„ ì…ë ¥ì„ í†µí•´ ë™ì ìœ¼ë¡œ ìƒì„±
        - ë³€ê²½ëœ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ êµ¬ì„±í•œ ì½”ë“œ : í„°ë„ì„ ë¯¸ë¦¬ ë°°ì—´ì— ì €ì¥ ë° ì •ë ¬, ë¯¸ë¦¬ ëª¨ë“  í–‰ì„± ìŒì— ëŒ€í•œ í„°ë„ì„ ìƒì„±

```java
//before
...
static int[] P;
static int N;

...
    //ë°ì´í„° êµ¬ì¡° ì°¨ì´ ë° í„°ë„ ìƒì„± ë°©ì‹ì˜ ì°¨ì´
    PriorityQueue<Tunnel> pq = new PriorityQueue<>();
    int totalDistance = 0;

    for (int i = 0; i < N; i++) {
        int x = sc.nextInt();
        int y = sc.nextInt();
        int z = sc.nextInt();
        pq.add(new Tunnel(x, y, z));
    }

...
        


//after
...
static int[] P;
static int N;
static Point[] points;

...
    //ë°ì´í„° êµ¬ì¡° ì°¨ì´ ë° í„°ë„ ìƒì„± ë°©ì‹ì˜ ì°¨ì´
    Tunnel[] tunnels = new Tunnel[N * (N - 1) / 2];
    int index = 0;
    for (int i = 0; i < N; i++) {
        for (int j = i + 1; j < N; j++) {
            int cost = distance(points[i], points[j]);
            tunnels[index++] = new Tunnel(i, j, cost);
        }
    }


```

<br>

2. **ë©”ëª¨ë¦¬ ì´ˆê³¼** ë°œìƒ
    - Point í´ë˜ìŠ¤
        - 2ë²ˆì§¸ ì½”ë“œ : Point í´ë˜ìŠ¤ê°€ ê° ì¢Œí‘œë¥¼ ë”°ë¡œ ì €ì¥í•˜ê³  ìˆìŒ. ì¦‰, x, y, zë¥¼ ë”°ë¡œ ì €ì¥í•˜ê³  ìˆìŒ.
        - 3ë²ˆì§¸ ì½”ë“œ : Point í´ë˜ìŠ¤ê°€ coords ë°°ì—´ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ì¢Œí‘œë¥¼ í•¨ê»˜ ì €ì¥í•˜ê³  ìˆìŒ. ë”°ë¼ì„œ Point í´ë˜ìŠ¤ëŠ” int[] coords í•„ë“œë¥¼ ê°€ì§€ê³  ìˆìŒ.


- ê±°ë¦¬ ê³„ì‚° ë°©ë²•
    - 2ë²ˆì§¸ ì½”ë“œ : distance(Point a, Point b) ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë‘ ì  ì‚¬ì´ì˜ ìµœì†Œ ê±°ë¦¬ë¥¼ ê³„ì‚°í•¨. ê° ì¢Œí‘œ ì¶•ë³„ë¡œ ì°¨ì´ë¥¼ êµ¬í•˜ê³  ê·¸ ì¤‘ì—ì„œ ìµœì†Œê°’ì„ ì„ íƒí•˜ì—¬ ìµœì†Œ ê±°ë¦¬ë¥¼ ê³„ì‚°
    - 3ë²ˆì§¸ ì½”ë“œ : ê° ì¢Œí‘œë¥¼ í•¨ê»˜ ì €ì¥í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆê¸° ë•Œë¬¸ì—, ê±°ë¦¬ ê³„ì‚°ì„ í•˜ëŠ” ë¶€ë¶„ì´ distance í•„ë“œë¥¼ ì„¤ì •í•  ë•Œ ì§ì ‘ ê³„ì‚°ë˜ë„ë¡ ë³€ê²½ë¨.


- Tunnel í´ë˜ìŠ¤ì˜ ì‚¬ìš©:
    - 2ë²ˆì§¸ ì½”ë“œ : Tunnel í´ë˜ìŠ¤ê°€ PlanetAì™€ PlanetBë¥¼ ì €ì¥í•˜ê³  ìˆìŒ.
    - 3ë²ˆì§¸ ì½”ë“œ : Tunnel í´ë˜ìŠ¤ê°€ PlanetAì™€ PlanetB ëŒ€ì‹ ì— Point ê°ì²´ì˜ indexë¥¼ ì €ì¥í•˜ê³  ìˆìŒ.

<details>
<summary><strong>ğŸ’­ ìµœì¢… ì½”ë“œ</strong></summary>

```java
package HayanLee.ê·¸ë˜í”„ì´ë¡ .ê¸°ì¶œë¬¸ì œ.Q44_í–‰ì„±í„°ë„;

import java.util.*;

class Tunnel implements Comparable<Tunnel> {
    int PlanetA;
    int PlanetB;
    int distance;

    public Tunnel(int PlanetA, int PlanetB, int distance) {
        this.PlanetA = PlanetA;
        this.PlanetB = PlanetB;
        this.distance = distance;
    }

    public int getDistance() {
        return this.distance;
    }

    @Override
    public int compareTo(Tunnel other) {
        return this.distance - other.distance;
    }
}

public class PlanetTunnel2 {
    static int[] P;

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        int N = sc.nextInt();

        P = new int[N];
        for (int i = 0; i < N; i++) {
            P[i] = i;
        }

        List<Tunnel> tunnels = new ArrayList<>();

        Point[] points = new Point[N];
        for (int i = 0; i < N; i++) { // x, y, z ì¢Œí‘œ ê°ê°
            int x = sc.nextInt();
            int y = sc.nextInt();
            int z = sc.nextInt();
            points[i] = new Point(x, y, z, i);
        }

        for (int dim = 0; dim < 3; dim++) {
            final int dimension = dim;
            Arrays.sort(points, Comparator.comparingInt(p -> p.coords[dimension]));
            for (int i = 1; i < N; i++) {
                int cost = Math.abs(points[i].coords[dimension] - points[i - 1].coords[dimension]);
                tunnels.add(new Tunnel(points[i].index, points[i - 1].index, cost));
            }
        }

        int totalCost = kruskal(tunnels);
        System.out.println(totalCost);
    }

    static int kruskal(List<Tunnel> tunnels) {
        Collections.sort(tunnels);

        int totalCost = 0;
        for (Tunnel tunnel : tunnels) {
            if (find(tunnel.PlanetA) != find(tunnel.PlanetB)) {
                union(tunnel.PlanetA, tunnel.PlanetB);
                totalCost += tunnel.distance;
            }
        }

        return totalCost;
    }

    static int find(int x) {
        if (P[x] == x) {
            return x;
        }
        return P[x] = find(P[x]);
    }

    static void union(int a, int b) {
        a = find(a);
        b = find(b);
        if (a != b) {
            P[b] = a;
        }
    }

    static class Point {
        int[] coords;
        int index;

        public Point(int x, int y, int z, int index) {
            this.coords = new int[]{x, y, z};
            this.index = index;
        }
    }
}
```
</details>

<br>
<br>


### â–«ï¸ ìµœì¢… í’€ì´
- PlannetTunnel2.java ì°¸ê³ 
    - ì•Œê³ ë¦¬ì¦˜ êµì²´ ì´ì „ ì½”ë“œëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì—¬ ìë°” íŒŒì¼ì„ ë‚¨ê¸°ì§€ ì•ŠìŒ â¡ï¸ ì²« í’€ì´ ì½”ë“œëŠ” ìœ„ì˜ ì•Œê³ ë¦¬ì¦˜ ë¶€ë¶„ ì°¸ê³ 

<img width="137" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/2f37ee4b-4673-492a-852a-80fc3cecff96">

<img width="1177" alt="image" src="https://github.com/hayannn/2L24-Algo-Study/assets/102213509/23c46742-1caf-4f69-84d4-764388c46eab">