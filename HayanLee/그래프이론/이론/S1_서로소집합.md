# âœ¨ ì„œë¡œì†Œ ì§‘í•©(Disjoint Sets)

## â–«ï¸ ì •ì˜
- **ê³µí†µ ì›ì†Œê°€ ì—†ëŠ” ë‘ ì§‘í•©** ì„ ì˜ë¯¸

![image](https://github.com/hayannn/2L24-Algo-Study/assets/102213509/f3f8c2c2-714c-42db-aa73-5baad7d661af)

<br>
<br>

## â–«ï¸ ì„œë¡œì†Œ ì§‘í•© ìë£Œêµ¬ì¡°
- **ì„œë¡œì†Œ ë¶€ë¶„ ì§‘í•©ë“¤ë¡œ ë‚˜ëˆ„ì–´ì§„ ì›ì†Œë“¤ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ìë£Œêµ¬ì¡°**ì´ë‹¤.


- 2ì¢…ë¥˜ì˜ ì—°ì‚°
  - ```í•©ì§‘í•©(Union)```: ë‘ ê°œì˜ ì›ì†Œê°€ í¬í•¨ëœ ì§‘í•©ì„ í•˜ë‚˜ì˜ ì§‘í•©ìœ¼ë¡œ í•©ì¹˜ëŠ” ì—°ì‚°
  - ```ì°¾ê¸°(Find)```: íŠ¹ì •í•œ ì›ì†Œê°€ ì†í•œ ì§‘í•©ì´ ì–´ë–¤ ì§‘í•©ì¸ì§€ ì•Œë ¤ì£¼ëŠ” ì—°ì‚°


- ì„œë¡œì†Œ ì§‘í•© ìë£Œêµ¬ì¡°ëŠ” **í•©ì¹˜ê¸° ì°¾ê¸°(Union Find) ìë£Œêµ¬ì¡°**ë¼ê³  ë¶ˆë¦¬ê¸°ë„ í•œë‹¤.

<br>
<br>

## â–«ï¸ ì„œë¡œì†Œ ì§‘í•© ìë£Œêµ¬ì¡° ë™ì‘ ê³¼ì •
1. í•©ì§‘í•©(Union) ì—°ì‚°ì„ í™•ì¸í•´, ì„œë¡œ ì—°ê²°ëœ ë‘ ë…¸ë“œ A, Bë¥¼ í™•ì¸í•œë‹¤.
   1) Aì™€ Bì˜ ë£¨íŠ¸ ë…¸ë“œ A<sup>'</sup>, B<sup>'</sup>ë¥¼ ê°ê° ì°¾ëŠ”ë‹¤.
   2) A<sup>'</sup>ë¥¼ B<sup>'</sup>ì˜ ë¶€ëª¨ë…¸ë“œë¡œ ì„¤ì •í•œë‹¤.

2. ëª¨ë“  í•©ì§‘í•©(Union) ì—°ì‚°ì„ ì²˜ë¦¬í•  ë•Œê¹Œì§€ 1ë²ˆì˜ ê³¼ì •ì„ ë°˜ë³µí•œë‹¤.

![image](https://github.com/hayannn/2L24-Algo-Study/assets/102213509/9ed115ae-98d0-43f0-97a9-898dc3f48d07)

### ğŸ“ ì£¼ì˜ ì‚¬í•­
- ì„œë¡œì†Œ ì§‘í•© ìë£Œêµ¬ì¡°ì—ì„œëŠ” **ì—°ê²°ì„±**ì„ í†µí•´ ì†ì‰½ê²Œ ì§‘í•©ì˜ í˜•íƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

    ![image](https://github.com/hayannn/2L24-Algo-Study/assets/102213509/2cba9235-946c-49e7-bb5d-7226c9d50bca)


- ê¸°ë³¸ì ì¸ í˜•íƒœì˜ ì„œë¡œì†Œ ì§‘í•© ìë£Œêµ¬ì¡°ì—ì„œëŠ” ë£¨íŠ¸ ë…¸ë“œì— ì¦‰ì‹œ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.
  - ë£¨íŠ¸ ë…¸ë“œë¥¼ ì°¾ê¸° ìœ„í•´ **ë¶€ëª¨ í…Œì´ë¸”ì„ ê³„ì†í•´ì„œ í™•ì¸**í•˜ë©° ê±°ìŠ¬ëŸ¬ ì˜¬ë¼ê°€ì•¼ í•œë‹¤.


- ë…¸ë“œ 3ì˜ ë£¨íŠ¸ë¥¼ ì°¾ê¸° ìœ„í•´ì„œëŠ”?
  - ë…¸ë“œ 2 â¡ï¸ ë…¸ë“œ 1ì— ì ‘ê·¼!
  
    ![image](https://github.com/hayannn/2L24-Algo-Study/assets/102213509/ff74ca54-512f-4532-94fd-0067c32112db)
<br>
<br>

## â–«ï¸ ì„œë¡œì†Œ ì§‘í•© ìë£Œêµ¬ì¡° ê¸°ë³¸ êµ¬í˜„ ë°©ë²• ë° ë¬¸ì œì 

<details>
<summary><strong>DisjointSetsOne.java</strong></summary>

```java
import java.util.*;

public class Main {

    // ë…¸ë“œì˜ ê°œìˆ˜(V)ì™€ ê°„ì„ (Union ì—°ì‚°)ì˜ ê°œìˆ˜(E)
    // ë…¸ë“œì˜ ê°œìˆ˜ëŠ” ìµœëŒ€ 100,000ê°œë¼ê³  ê°€ì •
    public static int v, e;
    public static int[] parent = new int[100001]; // ë¶€ëª¨ í…Œì´ë¸” ì´ˆê¸°í™”í•˜ê¸°

    // íŠ¹ì • ì›ì†Œê°€ ì†í•œ ì§‘í•©ì„ ì°¾ê¸°
    public static int findParent(int x) {
        // ë£¨íŠ¸ ë…¸ë“œê°€ ì•„ë‹ˆë¼ë©´, ë£¨íŠ¸ ë…¸ë“œë¥¼ ì°¾ì„ ë•Œê¹Œì§€ ì¬ê·€ì ìœ¼ë¡œ í˜¸ì¶œ
        if (x == parent[x]) return x;
        return findParent(parent[x]);
    }

    // ë‘ ì›ì†Œê°€ ì†í•œ ì§‘í•©ì„ í•©ì¹˜ê¸°
    public static void unionParent(int a, int b) {
        a = findParent(a);
        b = findParent(b);
        if (a < b) parent[b] = a;
        else parent[a] = b;
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        v = sc.nextInt();
        e = sc.nextInt();

        // ë¶€ëª¨ í…Œì´ë¸”ìƒì—ì„œ, ë¶€ëª¨ë¥¼ ìê¸° ìì‹ ìœ¼ë¡œ ì´ˆê¸°í™”
        for (int i = 1; i <= v; i++) {
            parent[i] = i;
        }

        // Union ì—°ì‚°ì„ ê°ê° ìˆ˜í–‰
        for (int i = 0; i < e; i++) {
            int a = sc.nextInt();
            int b = sc.nextInt();
            unionParent(a, b);
        }

        // ê° ì›ì†Œê°€ ì†í•œ ì§‘í•© ì¶œë ¥í•˜ê¸°
        System.out.print("ê° ì›ì†Œê°€ ì†í•œ ì§‘í•©: ");
        for (int i = 1; i <= v; i++) {
            System.out.print(findParent(i) + " ");
        }
        System.out.println();

        // ë¶€ëª¨ í…Œì´ë¸” ë‚´ìš© ì¶œë ¥í•˜ê¸°
        System.out.print("ë¶€ëª¨ í…Œì´ë¸”: ");
        for (int i = 1; i <= v; i++) {
            System.out.print(parent[i] + " ");
        }
        System.out.println();
    }
}
```
![image](https://github.com/hayannn/2L24-Algo-Study/assets/102213509/349e6854-62dd-4d3b-ae41-7dfad6df41bd)

</details>

- ë¬¸ì œì 
  - í•©ì§‘í•©(Union) ì—°ì‚°ì´ í¸í–¥ë˜ê²Œ ì´ë¤„ì§€ëŠ” ê²½ìš°, ì°¾ê¸°(Find) í•¨ìˆ˜ê°€ ë¹„íš¨ìœ¨ì ì¸ ë™ì‘ì„ í•œë‹¤.
  - ìµœì•…ì˜ ê²½ìš° ì°¾ê¸°(Find) í•¨ìˆ˜ê°€ ëª¨ë“  ë…¸ë“œë¥¼ ë‹¤ í™•ì¸í•˜ê²Œ ë˜ì–´ ì‹œê°„ ë³µì¡ë„ê°€ ```O(V)```
  > - ì˜ˆì‹œ : {1, 2, 3, 4, 5} ì´ 5ê°œì˜ ì›ì†Œê°€ ì¡´ì¬í•˜ëŠ” ìƒí™©
  > 
  > ![image](https://github.com/hayannn/2L24-Algo-Study/assets/102213509/7682514e-fbbe-47cc-a111-acb7fedd2f60)


<br>
<br>

## â–«ï¸ ì„œë¡œì†Œ ì§‘í•© ìë£Œêµ¬ì¡° ê²½ë¡œ ì••ì¶•
<details>
<summary><strong>DisjointSetsTwo.java</strong></summary>

```java
package HayanLee.ê·¸ë˜í”„ì´ë¡ .ì´ë¡ .code;

import java.util.*;

public class DisjointSetsTwo {

    // ë…¸ë“œì˜ ê°œìˆ˜(V)ì™€ ê°„ì„ (Union ì—°ì‚°)ì˜ ê°œìˆ˜(E)
    // ë…¸ë“œì˜ ê°œìˆ˜ëŠ” ìµœëŒ€ 100,000ê°œë¼ê³  ê°€ì •
    public static int v, e;
    public static int[] parent = new int[100001]; // ë¶€ëª¨ í…Œì´ë¸” ì´ˆê¸°í™”í•˜ê¸°

    // íŠ¹ì • ì›ì†Œê°€ ì†í•œ ì§‘í•©ì„ ì°¾ê¸°
    public static int findParent(int x) {
        // ë£¨íŠ¸ ë…¸ë“œê°€ ì•„ë‹ˆë¼ë©´, ë£¨íŠ¸ ë…¸ë“œë¥¼ ì°¾ì„ ë•Œê¹Œì§€ ì¬ê·€ì ìœ¼ë¡œ í˜¸ì¶œ
        if (x == parent[x]) return x;
        return parent[x] = findParent(parent[x]);
    }

    // ë‘ ì›ì†Œê°€ ì†í•œ ì§‘í•©ì„ í•©ì¹˜ê¸°
    public static void unionParent(int a, int b) {
        a = findParent(a);
        b = findParent(b);
        if (a < b) parent[b] = a;
        else parent[a] = b;
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        v = sc.nextInt();
        e = sc.nextInt();

        // ë¶€ëª¨ í…Œì´ë¸”ìƒì—ì„œ, ë¶€ëª¨ë¥¼ ìê¸° ìì‹ ìœ¼ë¡œ ì´ˆê¸°í™”
        for (int i = 1; i <= v; i++) {
            parent[i] = i;
        }

        // Union ì—°ì‚°ì„ ê°ê° ìˆ˜í–‰
        for (int i = 0; i < e; i++) {
            int a = sc.nextInt();
            int b = sc.nextInt();
            unionParent(a, b);
        }

        // ê° ì›ì†Œê°€ ì†í•œ ì§‘í•© ì¶œë ¥í•˜ê¸°
        System.out.print("ê° ì›ì†Œê°€ ì†í•œ ì§‘í•©: ");
        for (int i = 1; i <= v; i++) {
            System.out.print(findParent(i) + " ");
        }
        System.out.println();

        // ë¶€ëª¨ í…Œì´ë¸” ë‚´ìš© ì¶œë ¥í•˜ê¸°
        System.out.print("ë¶€ëª¨ í…Œì´ë¸”: ");
        for (int i = 1; i <= v; i++) {
            System.out.print(parent[i] + " ");
        }
        System.out.println();
    }
}
```

![image](https://github.com/hayannn/2L24-Algo-Study/assets/102213509/20bd63b9-f315-45a8-a5b6-f1f2ad69524a)


</details>

- ì°¾ê¸°(Find) í•¨ìˆ˜ë¥¼ ìµœì í™”í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ```Path Compression(ê²½ë¡œ ì••ì¶•)``` ì´ìš©
  - ì°¾ê¸°(Find) í•¨ìˆ˜ë¥¼ ì¬ê·€ì ìœ¼ë¡œ í˜¸ì¶œí•œ ë’¤ â¡ï¸ ë¶€ëª¨ í…Œì´ë¸” ê°’ì„ ë°”ë¡œ ê°±ì‹ !


- ì´ ê²½ë¡œ ì••ì¶•ì„ ì´ìš©í•˜ë©´?
  - ê° ë…¸ë“œì— ëŒ€í•´ **ì°¾ê¸°(Find) í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ì´í›„**ì— í•´ë‹¹ ë…¸ë“œì˜ ë£¨íŠ¸ ë…¸ë“œê°€ ë°”ë¡œ ë¶€ëª¨ ë…¸ë“œê°€ ëœë‹¤.
  - ```ëª¨ë“  í•©ì§‘í•©(Union) í•¨ìˆ˜ë¥¼ ì²˜ë¦¬í•œ í›„ ê° ì›ì†Œì— ëŒ€í•´ ì°¾ê¸°(Find) í•¨ìˆ˜ë¥¼ ìˆ˜í–‰í•˜ë©´ ë‹¤ìŒì²˜ëŸ¼ ë¶€ëª¨ í…Œì´ë¸” ê°±ì‹ ```
    ![image](https://github.com/hayannn/2L24-Algo-Study/assets/102213509/c6bc2256-ffdd-4b81-9ccc-f4bd570df3d9)
  - ê¸°ë³¸ ë°©ë²•ì— ë¹„í•´ **ì‹œê°„ ë³µì¡ë„ê°€ ê°œì„ **ëœë‹¤.


<br>
<br>

## â–«ï¸ ì„œë¡œì†Œ ì§‘í•© ì•Œê³ ë¦¬ì¦˜ ì‹œê°„ ë³µì¡ë„
- ì„œë¡œì†Œ ì§‘í•© ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•  ë•Œ, ê²½ë¡œ ì••ì¶• ë°©ë²•ë§Œì„ ì´ìš©í•  ê²½ìš°ì˜ ì‹œê°„ ë³µì¡ë„ëŠ”?

> ë…¸ë“œì˜ ê°œìˆ˜ê°€ Vê°œì´ê³ , ìµœëŒ€ V-1ê°œì˜ union ì—°ì‚°ê³¼ Mê°œì˜ find ì—°ì‚°ì´ ê°€ëŠ¥í•  ë•Œ

- ê²½ë¡œ ì••ì¶• ë°©ë²• ì‹œê°„ ë³µì¡ë„: **O(V + M(1 + log<sub>2-M/V</sub>V))**
  - ì˜ˆë¥¼ ë“¤ì–´, ë…¸ë“œì˜ ê°œìˆ˜ê°€ 1,000ê°œì´ê³  union ë° find ì—°ì‚°ì´ ì´ 100ë§Œë²ˆ ìˆ˜í–‰ëœë‹¤ë©´ â¡ï¸ ëŒ€ëµ  V + Mlog<sub>2</sub>Vë¥¼ ê³„ì‚°í•´ ì•½ 1,000ë§Œ ë²ˆ ê°€ëŸ‰ì˜ ì—°ì‚°ì´ í•„ìš”í•˜ë‹¤ê³  ì´í•´í•˜ë©´ ëœë‹¤.


<br>
<br>

## â–«ï¸ ì„œë¡œì†Œ ì§‘í•©ì„ í™œìš©í•œ ì‚¬ì´í´ íŒë³„
- ì„œë¡œì†Œ ì§‘í•©ì€ **ë¬´ë°©í–¥ ê·¸ë˜í”„ ë‚´ì—ì„œì˜ ì‚¬ì´í´ì„ íŒë³„**í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
  - ë°©í–¥ ê·¸ë˜í”„ì—ì„œì˜ ì‚¬ì´í´ ì—¬ë¶€ëŠ” DFSë¡œ íŒë³„


- **ì‚¬ì´í´ íŒë³„ ì•Œê³ ë¦¬ì¦˜**
1. ê° ê°„ì„ ì„ í•˜ë‚˜ì”© í™•ì¸í•˜ë©° ë‘ ë…¸ë“œì˜ ë£¨íŠ¸ ë…¸ë“œë¥¼ í™•ì¸í•œë‹¤.
   1) ë£¨íŠ¸ ë…¸ë“œê°€ ì„œë¡œ ë‹¤ë¥´ë‹¤ë©´ ë‘ ë…¸ë“œì— ëŒ€í•´ í•©ì§‘í•©(Union) ì—°ì‚°ì„ ìˆ˜í–‰í•œë‹¤.
   2) ë£¨íŠ¸ ë…¸ë“œê°€ ì„œë¡œ ê°™ë‹¤ë©´ ì‚¬ì´í´(Cycle)ì´ ë°œìƒí•œ ê²ƒì´ë‹¤.

2. ê·¸ë˜í”„ì— í¬í•¨ë˜ì–´ ìˆëŠ” ëª¨ë“  ê°„ì„ ì— ëŒ€í•˜ì—¬ 1ë²ˆ ê³¼ì •ì„ ë°˜ë³µí•œë‹¤.

![image](https://github.com/hayannn/2L24-Algo-Study/assets/102213509/72356ff9-1f3a-4cda-8497-7ec054e0dc15)


<br>

<details>
<summary><strong>CheckCycle.java</strong></summary>

```java
package HayanLee.ê·¸ë˜í”„ì´ë¡ .ì´ë¡ .code;

import java.util.*;

public class CheckCycle {

    // ë…¸ë“œì˜ ê°œìˆ˜(V)ì™€ ê°„ì„ (Union ì—°ì‚°)ì˜ ê°œìˆ˜(E)
    // ë…¸ë“œì˜ ê°œìˆ˜ëŠ” ìµœëŒ€ 100,000ê°œë¼ê³  ê°€ì •
    public static int v, e;
    public static int[] parent = new int[100001]; // ë¶€ëª¨ í…Œì´ë¸” ì´ˆê¸°í™”í•˜ê¸°

    // íŠ¹ì • ì›ì†Œê°€ ì†í•œ ì§‘í•©ì„ ì°¾ê¸°
    public static int findParent(int x) {
        // ë£¨íŠ¸ ë…¸ë“œê°€ ì•„ë‹ˆë¼ë©´, ë£¨íŠ¸ ë…¸ë“œë¥¼ ì°¾ì„ ë•Œê¹Œì§€ ì¬ê·€ì ìœ¼ë¡œ í˜¸ì¶œ
        if (x == parent[x]) return x;
        return parent[x] = findParent(parent[x]);
    }

    // ë‘ ì›ì†Œê°€ ì†í•œ ì§‘í•©ì„ í•©ì¹˜ê¸°
    public static void unionParent(int a, int b) {
        a = findParent(a);
        b = findParent(b);
        if (a < b) parent[b] = a;
        else parent[a] = b;
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        v = sc.nextInt();
        e = sc.nextInt();

        // ë¶€ëª¨ í…Œì´ë¸”ìƒì—ì„œ, ë¶€ëª¨ë¥¼ ìê¸° ìì‹ ìœ¼ë¡œ ì´ˆê¸°í™”
        for (int i = 1; i <= v; i++) {
            parent[i] = i;
        }

        boolean cycle = false; // ì‚¬ì´í´ ë°œìƒ ì—¬ë¶€

        for (int i = 0; i < e; i++) {
            int a = sc.nextInt();
            int b = sc.nextInt();
            // ì‚¬ì´í´ì´ ë°œìƒí•œ ê²½ìš° ì¢…ë£Œ
            if (findParent(a) == findParent(b)) {
                cycle = true;
                break;
            }
            // ì‚¬ì´í´ì´ ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤ë©´ í•©ì§‘í•©(Union) ì—°ì‚° ìˆ˜í–‰
            else {
                unionParent(a, b);
            }
        }

        if (cycle) {
            System.out.println("ì‚¬ì´í´ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
        else {
            System.out.println("ì‚¬ì´í´ì´ ë°œìƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
        }
    }
}
```

![image](https://github.com/hayannn/2L24-Algo-Study/assets/102213509/e626a19e-e9ca-437a-af09-32b22332f399)

</details>

